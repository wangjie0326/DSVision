# DSVision DSL (Domain Specific Language) è¯­æ³•è§„åˆ™æŒ‡å—

## ğŸ“– ä»€ä¹ˆæ˜¯DSLï¼Ÿ

DSLæ˜¯Domain Specific Languageï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸ºç‰¹å®šé—®é¢˜åŸŸè®¾è®¡çš„ç¼–ç¨‹è¯­è¨€ã€‚

**ç®€å•è¯´**ï¼šæˆ‘ä»¬ä¸ç”¨Pythonä»£ç ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªæ›´è´´è¿‘æ•°æ®ç»“æ„æ“ä½œçš„"è¿·ä½ è¯­è¨€"ï¼Œè®©ç”¨æˆ·ç”¨æ›´è‡ªç„¶çš„æ–¹å¼æ“ä½œæ•°æ®ç»“æ„ã€‚

### ä¸¾ä¾‹å¯¹æ¯”

âŒ **ä¼ ç»Ÿæ–¹å¼**ï¼ˆç”¨Python APIè°ƒç”¨ï¼‰ï¼š
```python
bst = BinarySearchTree()
bst.insert(50)
bst.insert(30)
bst.insert(70)
bst.search(30)
```

âœ… **DSLæ–¹å¼**ï¼ˆæˆ‘ä»¬çš„DSLï¼‰ï¼š
```
BST myBST {
    insert 50
    insert 30
    insert 70
    search 30
}
```

---

## ğŸ¯ DSLçš„åŸºæœ¬è¯­æ³•è§„åˆ™

### 1. åŸºæœ¬ç»“æ„

```
<æ•°æ®ç»“æ„ç±»å‹> <å˜é‡å> {
    <æ“ä½œ1>
    <æ“ä½œ2>
    <æ“ä½œ3>
}
```

### 2. æ”¯æŒçš„æ•°æ®ç»“æ„ç±»å‹

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `Sequential` | é¡ºåºè¡¨ï¼ˆæ•°ç»„ï¼‰ | `Sequential myList` |
| `Linked` | é“¾è¡¨ | `Linked myList` |
| `Stack` | æ ˆ | `Stack myStack` |
| `BST` | äºŒå‰æœç´¢æ ‘ | `BST myTree` |
| `AVL` | AVLè‡ªå¹³è¡¡æ ‘ | `AVL myAVL` |
| `Huffman` | å“ˆå¤«æ›¼æ ‘ | `Huffman myHuffman` |

### 3. æ”¯æŒçš„æ“ä½œ

#### çº¿æ€§ç»“æ„æ“ä½œï¼ˆSequentialã€Linkedã€Stackï¼‰

```
# åˆå§‹åŒ–
init [1, 2, 3, 4, 5]        # åˆå§‹åŒ–æ•°æ®
batch_init 1,2,3,4,5        # æ‰¹é‡åˆå§‹åŒ–

# æ’å…¥
insert 10                     # åœ¨æœ«å°¾æ’å…¥
insert 10 at 2               # åœ¨ä½ç½®2æ’å…¥
insert_head 0                # åœ¨å¤´éƒ¨æ’å…¥ï¼ˆé“¾è¡¨ï¼‰
insert_tail 6                # åœ¨å°¾éƒ¨æ’å…¥ï¼ˆé“¾è¡¨ï¼‰

# åˆ é™¤
delete at 1                   # åˆ é™¤ä½ç½®1çš„å…ƒç´ 
pop                          # å¼¹å‡ºæ ˆé¡¶ï¼ˆæ ˆä¸“ç”¨ï¼‰

# æŸ¥è¯¢
search 5                      # æŸ¥æ‰¾å…ƒç´ 5
peek                         # æŸ¥çœ‹æ ˆé¡¶ï¼ˆæ ˆä¸“ç”¨ï¼‰
```

#### æ ‘ç»“æ„æ“ä½œï¼ˆBSTã€AVLã€Huffmanï¼‰

```
# äºŒå‰æœç´¢æ ‘ã€AVL
insert 50                    # æ’å…¥å€¼
delete 30                    # åˆ é™¤å€¼
search 70                    # æŸ¥æ‰¾å€¼
traverse inorder             # ä¸­åºéå†
traverse preorder            # å‰åºéå†
traverse postorder           # ååºéå†
traverse levelorder          # å±‚åºéå†
min                         # è·å–æœ€å°å€¼
max                         # è·å–æœ€å¤§å€¼

# Huffmanæ ‘ï¼ˆæ–‡æœ¬æ¨¡å¼ï¼‰
build_text "HELLO"          # ä»æ–‡æœ¬æ„å»º
show_codes                  # æ˜¾ç¤ºç¼–ç è¡¨
encode "HI"                 # ç¼–ç 
decode "10101"              # è§£ç 

# Huffmanæ ‘ï¼ˆæ•°å­—æ¨¡å¼ï¼‰
build_numbers [2, 4, 6, 8]  # ä»æ•°å­—åˆ—è¡¨æ„å»º
```

---

## ğŸ“ å®Œæ•´ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šé¡ºåºè¡¨

```
Sequential myList {
    init [1, 2, 3, 4, 5]
    insert 10 at 2
    delete at 1
    search 3
}
```

**æ‰§è¡Œæµç¨‹**ï¼š
1. åˆå§‹åŒ–ï¼š[1, 2, 3, 4, 5]
2. åœ¨ä½ç½®2æ’å…¥10ï¼š[1, 2, 10, 3, 4, 5]
3. åˆ é™¤ä½ç½®1çš„å…ƒç´ ï¼š[1, 10, 3, 4, 5]
4. æœç´¢3ï¼ˆæ‰¾åˆ°ï¼Œè¿”å›ä½ç½®2ï¼‰

### ç¤ºä¾‹2ï¼šé“¾è¡¨

```
Linked myLinkedList {
    init [1, 2, 3]
    insert_head 0
    insert_tail 4
    search 2
}
```

**æ‰§è¡Œæµç¨‹**ï¼š
1. åˆå§‹åŒ–ï¼š0 â†’ 1 â†’ 2 â†’ 3 â†’ null
2. åœ¨å¤´éƒ¨æ’å…¥0ï¼š0 â†’ 1 â†’ 2 â†’ 3 â†’ null
3. åœ¨å°¾éƒ¨æ’å…¥4ï¼š0 â†’ 1 â†’ 2 â†’ 3 â†’ 4 â†’ null
4. æœç´¢2ï¼ˆæ‰¾åˆ°ï¼‰

### ç¤ºä¾‹3ï¼šäºŒå‰æœç´¢æ ‘

```
BST myBST {
    insert 50
    insert 30
    insert 70
    insert 20
    insert 40
    search 30
    min
    max
}
```

**æ‰§è¡Œæµç¨‹**ï¼š
```
        50
       /  \
      30   70
     / \
    20 40
```

### ç¤ºä¾‹4ï¼šAVLæ ‘ï¼ˆè‡ªåŠ¨å¹³è¡¡ï¼‰

```
AVL myAVL {
    insert 10
    insert 20
    insert 30
}
```

**ç‰¹ç‚¹**ï¼šAVLä¼šè‡ªåŠ¨æ—‹è½¬ä¿æŒå¹³è¡¡ï¼ˆä¼šçœ‹åˆ°rotationåŠ¨ç”»ï¼‰

### ç¤ºä¾‹5ï¼šHuffmanæ ‘ï¼ˆæ–‡æœ¬æ¨¡å¼ï¼‰

```
Huffman myHuffman {
    build_text "HELLO"
    show_codes
    encode "HELLO"
}
```

### ç¤ºä¾‹6ï¼šHuffmanæ ‘ï¼ˆæ•°å­—æ¨¡å¼ï¼‰

```
Huffman myHuffman {
    build_numbers [2, 4, 6, 8]
}
```

---

## ğŸ”§ DSLå¤„ç†æµç¨‹ï¼ˆ3ä¸ªé˜¶æ®µï¼‰

```
ç”¨æˆ·è¾“å…¥DSLä»£ç 
    â†“
[é˜¶æ®µ1] Lexerï¼ˆè¯æ³•åˆ†æï¼‰
    å°†ä»£ç åˆ†è§£æˆTokenï¼ˆè®°å·ï¼‰
    ä¾‹å¦‚ï¼š"insert 50" â†’ [Token(INSERT), Token(NUMBER, 50)]
    â†“
[é˜¶æ®µ2] Parserï¼ˆè¯­æ³•åˆ†æï¼‰
    å°†Tokenç»„ç»‡æˆASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰
    éªŒè¯è¯­æ³•æ˜¯å¦æ­£ç¡®
    â†“
[é˜¶æ®µ3] Interpreterï¼ˆè§£é‡Šæ‰§è¡Œï¼‰
    éå†ASTï¼Œæ‰§è¡Œæ¯ä¸ªæ“ä½œ
    è°ƒç”¨å¯¹åº”çš„æ•°æ®ç»“æ„æ–¹æ³•
    è®°å½•OperationStepï¼ˆç”¨äºåŠ¨ç”»ï¼‰
    â†“
è¿”å›ç»“æœ + æ“ä½œå†å² â†’ å‰ç«¯æ¸²æŸ“åŠ¨ç”»
```

### æ›´è¯¦ç»†çš„ä¾‹å­

è¾“å…¥ä»£ç ï¼š
```
BST myBST {
    insert 50
    insert 30
}
```

**ç¬¬1æ­¥ï¼šLexeråˆ†è¯**
```
Token(IDENTIFIER, "BST")
Token(IDENTIFIER, "myBST")
Token(LBRACE, "{")
Token(INSERT)
Token(NUMBER, "50")
Token(INSERT)
Token(NUMBER, "30")
Token(RBRACE, "}")
```

**ç¬¬2æ­¥ï¼šParserè¯­æ³•åˆ†æ**
```
StructureDeclaration(
    type="BST",
    name="myBST",
    operations=[
        InsertOperation(value=50),
        InsertOperation(value=30)
    ]
)
```

**ç¬¬3æ­¥ï¼šInterpreteræ‰§è¡Œ**
```
1. åˆ›å»ºBSTç»“æ„å®ä¾‹
2. æ‰§è¡Œ insert(50)
   - æ·»åŠ OperationStepï¼ˆæè¿°ã€åŠ¨ç”»ç±»å‹ç­‰ï¼‰
3. æ‰§è¡Œ insert(30)
   - æ·»åŠ OperationStep
4. è¿”å›ï¼šæ“ä½œå†å² + æœ€ç»ˆæ ‘ç»“æ„
```

---

## ğŸ“Š è¯­æ³•å›¾è¡¨

### çº¿æ€§ç»“æ„æ“ä½œæµç¨‹

```
Sequential/Linked/Stack {
    â”œâ”€ init [åˆå§‹æ•°æ®]           åˆå§‹åŒ–
    â”œâ”€ insert/push [å€¼] [ä½ç½®]   æ’å…¥
    â”œâ”€ delete [ä½ç½®]              åˆ é™¤
    â””â”€ search [å€¼]                æŸ¥è¯¢
}
```

### æ ‘ç»“æ„æ“ä½œæµç¨‹

```
BST/AVL/BinaryTree {
    â”œâ”€ insert [å€¼]               æ’å…¥
    â”œâ”€ delete [å€¼]               åˆ é™¤
    â”œâ”€ search [å€¼]               æŸ¥è¯¢
    â”œâ”€ traverse [inorder/...]    éå†
    â”œâ”€ min                       æœ€å°å€¼
    â””â”€ max                       æœ€å¤§å€¼
}
```

### Huffmanç‰¹æ®Šæ“ä½œæµç¨‹

```
Huffman {
    â”œâ”€ build_text [æ–‡æœ¬å­—ç¬¦ä¸²]    æ–‡æœ¬æ¨¡å¼æ„å»º
    â”œâ”€ build_numbers [æ•°å­—æ•°ç»„]   æ•°å­—æ¨¡å¼æ„å»º
    â”œâ”€ show_codes                 æ˜¾ç¤ºç¼–ç è¡¨
    â”œâ”€ encode [æ–‡æœ¬]              ç¼–ç 
    â””â”€ decode [ç¼–ç ]              è§£ç 
}
```

---

## âœ… é”™è¯¯å¤„ç†

DSLä¼šæ£€æŸ¥å’ŒæŠ¥å‘Šä»¥ä¸‹é”™è¯¯ï¼š

1. **è¯­æ³•é”™è¯¯** - ä¸æ­£ç¡®çš„å…³é”®å­—æˆ–æ ¼å¼
   ```
   é”™è¯¯ï¼šLinked myList {
       insrt 10           # æ‹¼å†™é”™è¯¯
   }
   ```

2. **ç±»å‹é”™è¯¯** - ä½¿ç”¨äº†ä¸æ”¯æŒçš„æ“ä½œ
   ```
   é”™è¯¯ï¼šSequential myList {
       insert_head 10     # Sequentialä¸æ”¯æŒinsert_head
   }
   ```

3. **å‚æ•°é”™è¯¯** - å‚æ•°æ•°é‡æˆ–ç±»å‹ä¸å¯¹
   ```
   é”™è¯¯ï¼šinsert 10 at      # ç¼ºå°‘ä½ç½®å‚æ•°
   ```

---

## ğŸ’¡ æç¤ºå’Œæœ€ä½³å®è·µ

1. **å˜é‡å**ï¼šä½¿ç”¨æœ‰æ„ä¹‰çš„åå­—
   - âœ… å¥½ï¼š`LinkedList myStudentList`
   - âŒ ä¸å¥½ï¼š`Linked x`

2. **æ“ä½œé¡ºåº**ï¼šä»ä¸Šåˆ°ä¸‹æ‰§è¡Œ
   - åˆå§‹åŒ–æ“ä½œé€šå¸¸åœ¨æœ€å‰é¢
   - åç»­æ“ä½œåŸºäºå‰é¢çš„ç»“æœ

3. **ç©ºå€¼å¤„ç†**ï¼šæ“ä½œç©ºç»“æ„ä¼šè¿”å›é”™è¯¯
   - åœ¨åˆ é™¤ä¹‹å‰ç¡®ä¿ç»“æ„éç©º

4. **å¤§æ•°æ®**ï¼šDSLå¯¹å¤§æ•°æ®çš„å¤„ç†æ€§èƒ½åŸºç¡€
   - æ¼”ç¤ºå»ºè®®ç”¨è¾ƒå°çš„æ•°æ®é›†ï¼ˆ< 100ä¸ªå…ƒç´ ï¼‰

---

## ğŸ“ æ€»ç»“

| é˜¶æ®µ | è¾“å…¥ | è¾“å‡º | ä½œç”¨ |
|------|------|------|------|
| Lexer | DSLä»£ç å­—ç¬¦ä¸² | Tokenåˆ—è¡¨ | è¯†åˆ«å…³é”®å­—å’Œæ“ä½œç¬¦ |
| Parser | Tokenåˆ—è¡¨ | ASTæ ‘ | éªŒè¯è¯­æ³•ï¼Œç»„ç»‡ç»“æ„ |
| Interpreter | ASTæ ‘ | æ“ä½œå†å² | æ‰§è¡Œæ“ä½œï¼Œè®°å½•æ­¥éª¤ |
| å‰ç«¯æ¸²æŸ“ | æ“ä½œå†å² | åŠ¨ç”» | é€æ­¥æ’­æ”¾å¯è§†åŒ– |

è¿™å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„DSLç³»ç»Ÿï¼ğŸš€